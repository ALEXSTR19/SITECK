<div class="container">
  <h2 class="dashboard-title">Dashboard</h2>
  <div class="card-container" *ngIf="adminStats">
    <mat-card class="card" [routerLink]="['/admin/tickets']" [queryParams]="{filter:'paid'}"> <mat-card-title>Servicios pagados</mat-card-title> <mat-card-content>{{adminStats.serviciosPagados}}</mat-card-content> </mat-card>
    <mat-card class="card" [routerLink]="['/admin/tickets']" [queryParams]="{filter:'unpaid'}"> <mat-card-title>Servicios no pagados</mat-card-title> <mat-card-content>{{adminStats.serviciosNoPagados}}</mat-card-content> </mat-card>
    <mat-card class="card" [routerLink]="['/admin/tickets']" [queryParams]="{filter:'finished-unpaid'}"> <mat-card-title>Finalizados con pago pendiente</mat-card-title> <mat-card-content>{{adminStats.serviciosFinalizadosPendiente}}</mat-card-content> </mat-card>
    <mat-card class="card" [routerLink]="['/admin/tickets']" [queryParams]="{filter:'finished-paid'}"> <mat-card-title>Finalizados y pagados</mat-card-title> <mat-card-content>{{adminStats.serviciosFinalizadosPagados}}</mat-card-content> </mat-card>
    <mat-card class="card" [routerLink]="['/admin/tickets']" [queryParams]="{filter:'today'}"> <mat-card-title>Tickets del día</mat-card-title> <mat-card-content>{{adminStats.ticketsDelDia}}</mat-card-content> </mat-card>
    <mat-card class="card" [routerLink]="['/admin/tickets']" [queryParams]="{filter:'pending'}"> <mat-card-title>Tickets pendientes</mat-card-title> <mat-card-content>{{adminStats.ticketsPendientes}}</mat-card-content> </mat-card>
    <mat-card class="card" [routerLink]="['/admin/tickets']" [queryParams]="{filter:'in-progress'}"> <mat-card-title>Tickets en proceso</mat-card-title> <mat-card-content>{{adminStats.ticketsEnProceso}}</mat-card-content> </mat-card>
    <mat-card class="card" [routerLink]="['/admin/tickets']" [queryParams]="{filter:'finished'}"> <mat-card-title>Tickets finalizados</mat-card-title> <mat-card-content>{{adminStats.ticketsFinalizados}}</mat-card-content> </mat-card>
  </div>
  <div class="charts-grid">
    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Tickets por día</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <canvas id="dayChart"></canvas>
      </mat-card-content>
    </mat-card>

    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Tickets por semana</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <canvas id="weekChart"></canvas>
      </mat-card-content>
    </mat-card>

    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Tickets por mes</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <canvas id="monthChart"></canvas>
      </mat-card-content>
    </mat-card>

    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Servicios más demandados</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <canvas id="serviciosChart"></canvas>
      </mat-card-content>
    </mat-card>

    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Clientes frecuentes</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <canvas id="clientesChart"></canvas>
      </mat-card-content>
    </mat-card>

    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Técnicos más destacados</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <canvas id="tecnicosChart"></canvas>
      </mat-card-content>
    </mat-card>
  </div>
  <mat-card>
    <mat-card-header>
      <mat-card-title>Calificaciones recientes</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="ratingsDataSource" class="mat-elevation-z1">
        <ng-container matColumnDef="ticket">
          <th mat-header-cell *matHeaderCellDef>Ticket</th>
          <td mat-cell *matCellDef="let r">{{r.ticket?.id}}</td>
        </ng-container>
        <ng-container matColumnDef="tecnico">
          <th mat-header-cell *matHeaderCellDef>Técnico</th>
          <td mat-cell *matCellDef="let r">{{r.tecnico?.nombre}}</td>
        </ng-container>
        <ng-container matColumnDef="fecha">
          <th mat-header-cell *matHeaderCellDef>Fecha</th>
          <td mat-cell *matCellDef="let r">{{r.fecha}}</td>
        </ng-container>
        <ng-container matColumnDef="stars">
          <th mat-header-cell *matHeaderCellDef>Puntuación</th>
          <td mat-cell *matCellDef="let r">{{r.stars}}</td>
        </ng-container>
        <ng-container matColumnDef="comment">
          <th mat-header-cell *matHeaderCellDef>Comentario</th>
          <td mat-cell *matCellDef="let r">{{r.comment}}</td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="ratingColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: ratingColumns"></tr>
      </table>
    </mat-card-content>
  </mat-card>
</div>
